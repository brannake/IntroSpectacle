!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.ReactHeatmap=t()}}(function(){var t;return function e(t,a,i){function n(o,s){if(!a[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var d=a[o]={exports:{}};t[o][0].call(d.exports,function(e){var a=t[o][1][e];return n(a?a:e)},d,d.exports,e,t,a,i)}return a[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(e,a,i){!function(e,i,n){"undefined"!=typeof a&&a.exports?a.exports=n():"function"==typeof t&&t.amd?t(n):i[e]=n()}("h337",this,function(){var t={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},e=function(){var e=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=0,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},a=t.defaultRadius;return e.prototype={_organiseData:function(t,e){var i=t[this._xField],n=t[this._yField],r=this._radi,o=this._data,s=this._max,u=this._min,h=t[this._valueField]||1,d=t.radius||this._cfgRadius||a;return o[i]||(o[i]=[],r[i]=[]),o[i][n]?o[i][n]+=h:(o[i][n]=h,r[i][n]=d),o[i][n]>s?(e?this.setDataMax(o[i][n]):this._max=o[i][n],!1):{x:i,y:n,value:h,radius:d,min:u,max:s}},_unOrganizeData:function(){var t=[],e=this._data,a=this._radi;for(var i in e)for(var n in e[i])t.push({x:i,y:n,radius:a[i][n],value:e[i][n]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var a=this._organiseData(arguments[0],!0);a&&this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[a]})}return this},setData:function(t){var e=t.data,a=e.length;this._data=[],this._radi=[];for(var i=0;a>i;i++)this._organiseData(e[i],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},e}(),a=function(){function t(t){var a=t.container,i=this.shadowCanvas=document.createElement("canvas"),n=this.canvas=t.canvas||document.createElement("canvas"),r=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(t.container)||{});n.className="heatmap-canvas",this._width=n.width=i.width=+r.width.replace(/px/,""),this._height=n.height=i.height=+r.height.replace(/px/,""),this.shadowCtx=i.getContext("2d"),this.ctx=n.getContext("2d"),n.style.cssText=i.style.cssText="position:absolute;left:0;top:0;",a.style.position="relative",a.appendChild(n),this._palette=e(t),this._templates={},this._setStyles(t)}var e=function(t){var e=t.gradient||t.defaultGradient,a=document.createElement("canvas"),i=a.getContext("2d");a.width=256,a.height=1;var n=i.createLinearGradient(0,0,256,1);for(var r in e)n.addColorStop(r,e[r]);return i.fillStyle=n,i.fillRect(0,0,256,1),i.getImageData(0,0,256,1).data},a=function(t,e){var a=document.createElement("canvas"),i=a.getContext("2d"),n=t,r=t;if(a.width=a.height=2*t,1==e)i.beginPath(),i.arc(n,r,t,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{var o=i.createRadialGradient(n,r,t*e,n,r,t);o.addColorStop(0,"rgba(0,0,0,1)"),o.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=o,i.fillRect(0,0,2*t,2*t)}return a},i=function(t){for(var e=[],a=t.min,i=t.max,n=t.radi,t=t.data,r=Object.keys(t),o=r.length;o--;)for(var s=r[o],u=Object.keys(t[s]),h=u.length;h--;){var d=u[h],l=t[s][d],c=n[s][d];e.push({x:s,y:d,value:l,radius:c})}return{min:a,max:i,data:e}};return t.prototype={renderPartial:function(t){this._drawAlpha(t),this._colorize()},renderAll:function(t){this._clear(),this._drawAlpha(i(t)),this._colorize()},_updateGradient:function(t){this._palette=e(t)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var e=this._min=t.min,i=this._max=t.max,t=t.data||[],n=t.length,r=1-this._blur;n--;){var o,s=t[n],u=s.x,h=s.y,d=s.radius,l=Math.min(s.value,i),c=u-d,f=h-d,_=this.shadowCtx;this._templates[d]?o=this._templates[d]:this._templates[d]=o=a(d,r),_.globalAlpha=(l-e)/(i-e),_.drawImage(o,c,f),c<this._renderBoundaries[0]&&(this._renderBoundaries[0]=c),f<this._renderBoundaries[1]&&(this._renderBoundaries[1]=f),c+2*d>this._renderBoundaries[2]&&(this._renderBoundaries[2]=c+2*d),f+2*d>this._renderBoundaries[3]&&(this._renderBoundaries[3]=f+2*d)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],a=this._renderBoundaries[2]-t,i=this._renderBoundaries[3]-e,n=this._width,r=this._height,o=this._opacity,s=this._maxOpacity,u=this._minOpacity,h=this._useGradientOpacity;0>t&&(t=0),0>e&&(e=0),t+a>n&&(a=n-t),e+i>r&&(i=r-e);for(var d=this.shadowCtx.getImageData(t,e,a,i),l=d.data,c=l.length,f=this._palette,_=3;c>_;_+=4){var p=l[_],m=4*p;if(m){var g;g=o>0?o:s>p?u>p?u:p:s,l[_-3]=f[m],l[_-2]=f[m+1],l[_-1]=f[m+2],l[_]=h?f[m+3]:g}}d.data=l,this.ctx.putImageData(d,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e,a=this.shadowCtx,i=a.getImageData(t.x,t.y,1,1),n=i.data[3],r=this._max,o=this._min;return e=Math.abs(r-o)*(n/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},t}(),i=function(){var e=!1;return"canvas2d"===t.defaultRenderer&&(e=a),e}(),n={merge:function(){for(var t={},e=arguments.length,a=0;e>a;a++){var i=arguments[a];for(var n in i)t[n]=i[n]}return t}},r=function(){function a(){var a=this._config=n.merge(t,arguments[0]||{});if(this._coordinator=new r,a.plugin){var s=a.plugin;if(!t.plugins[s])throw new Error("Plugin '"+s+"' not found. Maybe it was not registered.");var u=t.plugins[s];this._renderer=new u.renderer(a),this._store=new u.store(a)}else this._renderer=new i(a),this._store=new e(a);o(this)}var r=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,a){var i=this.cStore;i[t]||(i[t]=[]),i[t].push(function(t){return e.call(a,t)})},emit:function(t,e){var a=this.cStore;if(a[t])for(var i=a[t].length,n=0;i>n;n++){var r=a[t][n];r(e)}}},t}(),o=function(t){var e=t._renderer,a=t._coordinator,i=t._store;a.on("renderpartial",e.renderPartial,e),a.on("renderall",e.renderAll,e),a.on("extremachange",function(e){t._config.onExtremaChange&&t._config.onExtremaChange({min:e.min,max:e.max,gradient:t._config.gradient||t._config.defaultGradient})}),i.setCoordinator(a)};return a.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=n.merge(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},a}(),o={create:function(t){return new r(t)},register:function(e,a){t.plugins[e]=a}};return o})},{}],2:[function(t,e,a){(function(i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),u=function(t,e,a){for(var i=!0;i;){var n=t,r=e,o=a;i=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,r);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var h=Object.getPrototypeOf(n);if(null===h)return;t=h,e=r,a=o,i=!0,s=h=void 0}},h="undefined"!=typeof window?window.React:"undefined"!=typeof i?i.React:null,d=n(h),l=t("react-dom"),c=n(l),f=t("heatmapjs/build/heatmap.js"),_=n(f),p=function(t){function e(t){r(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.setData=this.setData.bind(this)}return o(e,t),s(e,[{key:"componentDidMount",value:function(){this.heatmap=_["default"].create({container:c["default"].findDOMNode(this)}),this.setData(this.props.max,this.props.data)}},{key:"componentWillReceiveProps",value:function(t){this.setData(t.max,t.data)}},{key:"setData",value:function(t,e){this.heatmap.setData({max:t,data:this.computeData(e)})}},{key:"computeData",value:function(t){var e=this;if("percent"!==this.props.unit)return t;var a=function(){var a={};return a.width=c["default"].findDOMNode(e).offsetWidth,a.height=c["default"].findDOMNode(e).offsetHeight,{v:t.map(function(t,e){return{x:t.x/100*a.width,y:t.y/100*a.height}})}}();return"object"==typeof a?a.v:void 0}},{key:"render",value:function(){return d["default"].createElement("div",{style:{width:"100%",height:"100%"}})}}]),e}(h.Component);p.propTypes={max:d["default"].PropTypes.number,data:d["default"].PropTypes.array,unit:d["default"].PropTypes.string},p.defaultProps={max:5,data:[],unit:"percent"},a["default"]=p,e.exports=a["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"heatmapjs/build/heatmap.js":1,"react-dom":void 0}]},{},[2])(2)});